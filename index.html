<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Relative Fragment Intensity Prediction for Lipids • flipr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Relative Fragment Intensity Prediction for Lipids">
<meta property="og:description" content="Calculates non-linear models for relative fragment intensity prediction based on series of increasing collision energies for HCD and CID systems.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">flipr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/introduction.html">Using flipR</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="flipr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#flipr" class="anchor"></a>FlipR <img src="reference/figures/flipr-site.png" align="right">
</h1></div>

<p>FlipR is a package to help in optimal collision energy selection for molecules based on MS2 data that was gathered with increasing collision energies. It therefor fits a parameterized log-normal distribution to the relative intensity of one particular fragment ion (incl. adduct) over the range of collision energies. We use the nls.multstart package to select a model that minimizes the AIC value within a given range of parameters that are used in a grid search, starting in an initially user-determined range. The log-normal distribution is able to adapt quite well to different fragments and their distribution profiles. Some cases though seemingly show different fragmentation behaviour that is usually visible through a less steep decline (flatter curve) of the scan relative intensity over the range of fragmentation energies.</p>
<p>It has been tested on Thermo QExactive HF and Waters QTof instruments.</p>
<p>Please see the <a href="https://github.com/lifs-tools/flipr-trainer">flipr-trainer</a> project for an execution and training harness for multiple measurements.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install devtools:</p>
<p>For Ubuntu, please install the following libraries:</p>
<pre><code>  sudo apt-get install build-essential libcurl4-gnutls-dev libxml2-dev libssl-dev</code></pre>
<p>Your will require R&gt;=3.5.0 for flipr. Start administrator’s R session as follows, to install the packages into the site-wide (all users) library:</p>
<pre><code>  sudo -i R</code></pre>
<p>Install devtools and wait until installation has finished:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">  <span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"devtools"</span>)</a></code></pre></div>
<p>Load the devtools library:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">  <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(devtools)</a></code></pre></div>
<p>Run</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">  <span class="kw"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"lifs-tools/flipr"</span>)</a></code></pre></div>
<p>This will install the latest, potentially unstable development version of the package with all required dependencies into your local R installation.</p>
<p>If you want to use a proper release version, referenced by a Git tag (here: v1.0.6) install the package as follows:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">  <span class="kw"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"lifs-tools/flipr"</span>, <span class="dt">ref=</span><span class="st">"v1.0.6"</span>)</a></code></pre></div>
<p>To load the package, start an R session and type</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">  <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(flipr)</a></code></pre></div>
<p>Type the following to see the package vignette / tutorial:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">  <span class="kw"><a href="https://rdrr.io/r/utils/vignette.html">vignette</a></span>(<span class="st">'introduction'</span>, <span class="dt">package =</span> <span class="st">'flipr'</span>)</a></code></pre></div>
</div>
<div id="building-the-docker-image" class="section level2">
<h2 class="hasAnchor">
<a href="#building-the-docker-image" class="anchor"></a>Building the Docker image</h2>
<p>The flipr package can also be packaged as a Docker container. To build it for your local use, use the following command under Linux:</p>
<pre><code>./build-docker.sh -d=docker/flipr/ -v=MYTAG </code></pre>
<p><code>MYTAG</code> would usually be the package version, e.g. <code>1.0.6</code>. This command will build the image and will tag it under the version provided with <code>-v</code>.</p>
<p>If you want to change the default registry prefix used for tagging, edit the <code>config.sh</code> file. Also, the tagging base (the first part after the registry) can be defined in that file.</p>
<div id="running-the-docker-image" class="section level3">
<h3 class="hasAnchor">
<a href="#running-the-docker-image" class="anchor"></a>Running the Docker image</h3>
<p>To run flipr using the docker image from your current directory (under Linux), run it as follows (assuming you have not changed <code>config.sh</code>):</p>
<pre><code>docker run -v "$PWD":/home/data/ do1-aps-feris.isas.de:5000/lifs/flipr:1.0.6 --projectDir=/home/data --trainModel=TRUE --dataPlots=TRUE</code></pre>
<p>This will mount the contents of the current directory (PWD) into the <code>/home/data</code> folder within the container. Then, Docker will run the image tagged <code>do1-aps-feris.isas.de:5000/lifs/flipr:1.0.6</code> on your local machine. The commands following are passed to the <code>flipr.R</code> script, which is located in the <code>exec</code> folder of the package. To see, which options are available, add <code>--help</code> to the command. It is advisable to add a custom <code>config.R</code> file to define the boundaries for the optimization. You can use it as follows:</p>
<pre><code>docker run -v "$PWD":/home/data/ do1-aps-feris.isas.de:5000/lifs/flipr:1.0.6 --projectDir=/home/data --trainModel=TRUE --dataPlots=TRUE --config=config.R</code></pre>
<p>This assumes, that <code>config.R</code> is available within the <code>projectDir</code> directory. All file and directory arguments apply to the file system <strong>within</strong> the container!</p>
<p>Example files are available from the <code>inst/testdata</code> folder of this project.</p>
<ol>
<li>Create a new folder <code>flipr-test</code>
</li>
<li>Copy the files <code>inst/testdata/qex-HF-config.R</code> and <code>inst/testdata/12-HETE-d8-_M-H_1-qex_fip.tsv</code> into <code>flipr-test</code>
</li>
<li>Change to the <code>flipr-test</code> folder</li>
<li>Run the flipr Docker container: <code>docker run --rm -v "$PWD":/home/data/ do1-aps-feris.isas.de:5000/lifs/flipr:1.0.6 --projectDir=/home/data --trainModel=TRUE --dataPlots=TRUE --config=/home/data/qex-HF-config.R</code>
</li>
<li>Examine the execution of the container and open the results in <code>flipr-test</code>
</li>
</ol>
<p>You will see multiple diagnostic plots of the extracted signals, as well as plots generated to display the model fit and various metrics for the fit quality. Each plot will contain display information for each of the fragments defined for one precursor molecule and adduct combination.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Nils Hoffmann <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/lifs-tools/flipr"><img src="https://travis-ci.org/lifs-tools/flipr.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://codecov.io/gh/lifs-tools/flipr"><img src="https://codecov.io/gh/lifs-tools/flipr/branch/master/graph/badge.svg" alt="codecov"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Nils Hoffmann.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
